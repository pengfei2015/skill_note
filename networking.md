# 网络

### OSI七层模型
1. 物理层    
    考虑的是怎么在传输媒体上传输比特流（000101010的电信号）  传输介质如：网卡，网线，集线器。中继器。调制解调器。 
- 机械特性：接线器的形状和尺寸，引线数目和排列、固定和锁定装置。
- 电气特性：接口电缆的各线的电压范围 
- 功能特性：某条线某一电压何意
- 规程特性：不同功能的各种可能事件的出现顺序

2. 数据链路层
    将比特组合成字节，将字节组合成帧（数据包），传递到网络层。将接收到的帧拆包，传递到物理层。
    使用链路层地址（以太网使用MAC）地址，
    - 每一帧分为head和data两部分，head固定18字节，包含发送者6字节，接受者6字节，数据类型6字节。data有46-1500字节
    - 发送者和接受者指的是MAC地址，以太网协议规定，每个接入Internet设备都必须具备网卡，每个网卡出厂时都被烧录了唯一的MAC地址。长度为48位2进制。
    - 局域网之间的通信就是通过MAC地址（广播）每台机器都能收到。但是指关心接受者是自己的信号。
    
3. 网络层
- 不同的局域网之间的互相通信，形成了网络层，网络层定义了IP协议。
- 数据链路层帧中的data，在这一层被转换成数据包。通过路径选择（寻址）IP
- MAC地址用来标识在局域网中的位置，IP地址用来标识你在哪个局域网。MAC地址和IP地址唯一标识了你在互联网的位置。
- ARP协议解析地址原理，A向B发消息
    - A在本地的ARP缓存中通过B的IP获取MAC地址
    - 获取不到的时候，会发送ARP请求询问。格式是‘A-MAC’-‘FF:FF:FF:FF:FF:FF’-‘A-IP’-‘B-IP’-‘数据’
    - FF:FF:FF:FF:FF:FF表示获取目标IP的MAC地址，根据A-IP和B-IP看是不是在一个局域网，如果在正常请求。如果不在会自动将B-IP改成B网关地址。然后返回B网关的MAC地址。发消息的时候，目标MAC是B网关MAC，由B网关转发消息。
    - B收到ARP请求的时候，确定A的目标IP和自己匹配，会将A的IP地址和MAC地址映射添加到本地ARC缓存中。并将自己的MAC地址ARP回复消息直接发送到A上
    - A收到ARP回复消息后，将B的IP和MAC映射更新到ARP缓存。
4. 传输层
    建立端口到端口的通信。TCP、UDP
- TCP（传输控制协议）和UDP（用户数据报协议）的区别
    - TCP传输的时候需要连接（三次握手），UDP不需要连接
    - TCP数据传输安全可靠，要求每次接受的时候必须返回ack, 为每个数据包都提供一个序号。通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付
    - TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流;UDP是面向报文的
    - 每一条TCP连接都是一对一的，UDP可以一对多，多对一，多对多
    - TCP首部开销大，UDP开销小
5. 会话层
6. 表示层  
7. 应用层
    规定应用程序的数据格式。
    - 常见的使用TCP协议的应用层服务：HTTP，FTP，SMTP，WWW
    - 常见的使用UDP协议的应用层服务：BOOTP

### TCP/IP五层模型
1. 物理层 2. 数据链路层 3. 网络层  4. 传输层  5. 应用层     

### TCP的三次握手和四次分手 
- 三次握手
    - 客户端发送syn包，进入syn_send状态
    - 服务器收到请求发送syn+ack，进去syn_receive状态
    - 客户端接收到syn+ack发送ack，进入连接状态
- 四次挥手
    - 客户端发送释放报文，进入终止等待状态
    - 服务端发送ack，进入关闭等待状态
    - 客户端收到服务器ack后，继续等待服务端发送释放报文。
    - 服务器发送释放报文，进入最后确定状态
    - 客户端收到后发送ack，进入时间的等待状态。
    - 服务器收到后，释放。进入close状态。比客户端早

### HTTP和HTTPS 
- HTTPS在HTTP基础上引入SSL。既保证了信息传输安全，也保证了网站的安全。
- HTTPS需要到CA申请证书
- 端口不同HTTP是80，HTTPS是443
- HTTPS缺点，费时，费电，费钱

### HTTPS加密过程
- 服务器将公钥发送到第三方机构，第三方机构通过自己的公钥对其加上公司信息对其加密，生成证书，给服务器。
- 客户端向服务器请求证书，通过系统或浏览器内置的公钥对证书解密，获得服务器的公钥并验证证书的信息。
- 客户端获得公钥后，通过公钥获取对称加密的密钥。每次请求时获取的密钥都不同。


### HTTP常用的请求头
1. GET：简单请求数据
2. POST：提交数据
3. HEAD：用于获取报头
4. PUT：请求文档的一个版本
5. DELETE：删除指定文档
6. CONNECT：SSL隧道基于代理的请求
7. OPTIONS：返回所有可用的方法
8. TRACE：发送一个请求副本，以跟踪其处理进程

### GET和POST的区别
- GET请求的参数拼接到URL上，所以长度有限制，而且参数可见不安全，一般用来获取数据，
- POST请求参数放在请求体中，长度没有限制。多用来修改数据。

### 参考链接
[OSI七层协议大白话解读](https://blog.csdn.net/taotongning/article/details/81352985)  
[OSI七层模型详解](https://blog.csdn.net/yaopeng_2005/article/details/7064869)  
[TCP与UDP的区别](https://blog.csdn.net/yipiankongbai/article/details/24435977)  
[ARP](https://baike.baidu.com/item/ARP/609343)  
[也许，这样理解HTTPS更容易](https://showme.codes/2017-02-20/understand-https/)  
